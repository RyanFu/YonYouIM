


/**
* 全局配置
*
*/
//企业空间webservice地址
//window.ESN_HOST = 'http://10.2.112.24';
window.ESN_HOST = 'http://127.0.0.4:80';
//企业空间webservice地址
//window.ESN_URL = window.ESN_HOST + '/service';
window.ESN_URL = 'http://127.0.0.4:80';
//后台提供方法的命名空间
window.ANDROID_NAMESPACE = 'proxy';
//分页
window.cur_page = 1;

//window.face_list = '<div class="face-wraper"><div class="face-list clearfix"><ul class="clearfix" ><li><img src="../img/face/smilea_thumb.gif"></li><li><img src="../img/face/tootha_thumb.gif"></li><li><img src="../img/face/laugh.gif"></li><li><img src="../img/face/tza_thumb.gif"></li><li><img src="../img/face/kl_thumb.gif"></li><li><img src="../img/face/kbsa_thumb.gif"></li><li><img src="../img/face/cj_thumb.gif"></li><li><img src="../img/face/shamea_thumb.gif"></li><li><img src="../img/face/zy_thumb.gif"></li><li><img src="../img/face/bz_thumb.gif"></li><li><img src="../img/face/bs2_thumb.gif"></li><li><img src="../img/face/lovea_thumb.gif"></li><li><img src="../img/face/shenshou_thumb.gif"></li><li><img src="../img/face/horse2_thumb.gif"></li><li><img src="../img/face/fuyun_thumb.gif"></li><li><img src="../img/face/geili_thumb.gif"></li><li><img src="../img/face/wg_thumb.gif"></li><li><img src="../img/face/vw_thumb.gif"></li><li><img src="../img/face/panda_thumb.gif"></li><li><img src="../img/face/rabbit_thumb.gif"></li><li><img src="../img/face/otm_thumb.gif"></li><li><img src="../img/face/j_thumb.gif"></li><li><img src="../img/face/hufen_thumb.gif"></li>\
//</ul><ul class="clearfix" ><li><img src="../img/face/liwu_thumb.gif"></li><li><img  src="../img/face/sada_thumb.gif"></li><li><img src="../img/face/heia_thumb.gif"></li><li><img src="../img/face/qq_thumb.gif"></li><li><img src="../img/face/sb_thumb.gif"></li><li><img src="../img/face/mb_thumb.gif"></li><li><img  src="../img/face/ldln_thumb.gif"></li><li><img  src="../img/face/yhh_thumb.gif"></li><li><img  src="../img/face/zhh_thumb.gif"></li><li><img  src="../img/face/x_thumb.gif"></li><li><img  src="../img/face/cry.gif"></li><li><img  src="../img/face/wq_thumb.gif"></li><li><img  src="../img/face/t_thumb.gif"></li><li><img  src="../img/face/k_thumb.gif"></li><li><img  src="../img/face/bba_thumb.gif"></li><li><img  src="../img/face/angrya_thumb.gif"></li><li><img  src="../img/face/yw_thumb.gif"></li><li><img  src="../img/face/cza_thumb.gif"></li><li><img  src="../img/face/88_thumb.gif"></li><li><img  src="../img/face/sk_thumb.gif"></li><li><img  src="../img/face/sweata_thumb.gif"></li><li><img  src="../img/face/sleepya_thumb.gif"></li><li><img  src="../img/face/sleepa_thumb.gif"></li>\
//</ul><ul class="clearfix" ><li><img  src="../img/face/money_thumb.gif"></li><li><img  src="../img/face/sw_thumb.gif"></li><li><img  src="../img/face/cool_thumb.gif"></li><li><img  src="../img/face/hsa_thumb.gif"></li><li><img  src="../img/face/hatea_thumb.gif"></li><li><img  src="../img/face/gza_thumb.gif"></li><li><img  src="../img/face/dizzya_thumb.gif"></li><li><img  src="../img/face/bs_thumb.gif"></li><li><img  src="../img/face/crazya_thumb.gif"></li><li><img  src="../img/face/h_thumb.gif"></li><li><img  src="../img/face/yx_thumb.gif"></li><li><img  src="../img/face/nm_thumb.gif"></li><li><img  src="../img/face/hearta_thumb.gif"></li><li><img  src="../img/face/unheart.gif"></li><li><img  src="../img/face/pig.gif"></li><li><img  src="../img/face/ok_thumb.gif"></li><li><img  src="../img/face/ye_thumb.gif"></li><li><img  src="../img/face/good_thumb.gif"></li><li><img  src="../img/face/no_thumb.gif"></li><li><img  src="../img/face/z2_thumb.gif"></li><li><img  src="../img/face/come_thumb.gif"></li><li><img  src="../img/face/sad_thumb.gif"></li><li><img  src="../img/face/lazu_thumb.gif"></li>\
//</ul><ul class="clearfix" ><li><img  src="../img/face/cake.gif"></li><li><img  src="../img/face/clock_thumb.gif"></li><li><img  src="../img/face/m_thumb.gif"></li></ul></div></div>';
window.face_list = '<div class="face-wraper"><div class="face-list clearfix"><ul class="clearfix"><li><img src="../img/face/smile_1f600.png"></li><li><img src="../img/face/smile_1f601.png"></li><li><img src="../img/face/smile_1f602.png"></li><li><img src="../img/face/smile_1f603.png"></li><li><img src="../img/face/smile_1f604.png"></li><li><img src="../img/face/smile_1f605.png"></li><li><img src="../img/face/smile_1f606.png"></li><li><img src="../img/face/smile_1f607.png"></li><li><img src="../img/face/smile_1f608.png"></li><li><img src="../img/face/smile_1f609.png"></li><li><img src="../img/face/smile_1f60a.png"></li><li><img src="../img/face/smile_1f60b.png"></li><li><img src="../img/face/smile_1f60c.png"></li><li><img src="../img/face/smile_1f60d.png"></li><li><img src="../img/face/smile_1f60e.png"></li><li><img src="../img/face/smile_1f60f.png"></li><li><img src="../img/face/smile_1f610.png"></li><li><img src="../img/face/smile_1f611.png"></li><li><img src="../img/face/smile_1f612.png"></li><li><img src="../img/face/smile_1f613.png"></li><li><img src="../img/face/smile_1f614.png"></li><li><img src="../img/face/smile_1f615.png"></li><li><img src="../img/face/smile_1f616.png"></li></ul><ul class><li><img src="../img/face/smile_1f617.png"></li><li><img src="../img/face/smile_1f618.png"></li><li><img src="../img/face/smile_1f619.png"></li><li><img src="../img/face/smile_1f61a.png"></li><li><img src="../img/face/smile_1f61b.png"></li><li><img src="../img/face/smile_1f61c.png"></li><li><img src="../img/face/smile_1f61d.png"></li><li><img src="../img/face/smile_1f61e.png"></li><li><img src="../img/face/smile_1f61f.png"></li><li><img src="../img/face/smile_1f620.png"></li><li><img src="../img/face/smile_1f621.png"></li><li><img src="../img/face/smile_1f622.png"></li><li><img src="../img/face/smile_1f623.png"></li><li><img src="../img/face/smile_1f624.png"></li><li><img src="../img/face/smile_1f625.png"></li><li><img src="../img/face/smile_1f626.png"></li><li><img src="../img/face/smile_1f627.png"></li><li><img src="../img/face/smile_1f628.png"></li><li><img src="../img/face/smile_1f629.png"></li><li><img src="../img/face/smile_1f62a.png"></li><li><img src="../img/face/smile_1f62b.png"></li><li><img src="../img/face/smile_1f62c.png"></li><li><img src="../img/face/smile_1f62d.png"></li></ul><ul class><li><img src="../img/face/smile_1f62e.png"></li><li><img src="../img/face/smile_1f62f.png"></li><li><img src="../img/face/smile_1f630.png"></li><li><img src="../img/face/smile_1f631.png"></li><li><img src="../img/face/smile_1f632.png"></li><li><img src="../img/face/smile_1f633.png"></li><li><img src="../img/face/smile_1f634.png"></li><li><img src="../img/face/smile_1f635.png"></li><li><img src="../img/face/smile_1f636.png"></li><li><img src="../img/face/smile_263a.png"></li></ul></div></div>';
/**
* 模板自定义方法
* @require template.js
*/
template.helper('dateFormat', function (date, format) {
	var time = new Date(parseInt(date)*1000);
	var now = new Date();
	if(time.getFullYear()!=now.getFullYear()){
	   return time.format('yyyy-MM-dd hh:mm');
	}else if(time.getDate()!=now.getDate()){
	   return time.format('MM-dd hh:mm');
	}else{
	   return time.format('hh:mm');
	}
});
template.helper('firstLetter', function (str) {
   return getFirstLetter(str);
});
template.helper('count', function (obj) {
	if(obj){
	   return obj.length;
	}
	return 0;
});
template.helper('iscurrentsps', function (sid,name) {
	if(sid == curSpaceId){
//	if(sid == localStorage.cur_space_id){
	   $('#cur_spc_name').html(name);
//	   return '<span class="cur-spc"></span>';
	   return 'cur-spc';
	}
	return "";
});
template.helper('cutName', function (nameStr,length,front) {//alert(nameStr)
	return((!nameStr)?'':front?nameStr.split('.')[0]:nameStr.substr(nameStr.length-length,length));
});
template.helper('rplToOther', function (userId) {
	return(userId==window.jid?'hidden':'');
});
template.helper('isadmin', function (admins) {//alert(admins.length)
	if(admins&&$.inArray(window.jid,admins)!=-1){
		return 'incharge';
	}
});
template.helper('canPraise', function (praisedArr) {
//	console.log(">>>>>>>>>"+window.jid+">>>>>"+$.inArray(window.jid,praisedArr));
	if($.inArray(window.jid,praisedArr)!=-1){
		return "praised";
	}
});


window.showMessage = function(msg,type){
	var $msg_box = $('#msg_box');
	$msg_box.html(msg).removeClass('hidden');
	setTimeout(function(){$msg_box.removeClass().addClass('hidden')},1500);
};
window.showConfirm = function(msg){
	var $confirm_box = $('#confirm_box');
	$confirm_box.removeClass('hidden').find('.msg').html(msg);
};
if(!localStorage.cur_space_id){
//	localStorage.cur_space_id = 0;
	//localStorage.cur_space_name = "我的好友圈";
}
window.switchSpace = function(sid,name){
//	localStorage.cur_space_id =sid;
	//localStorage.cur_space_name =name;
	location.href = "index.html?curSpaceId="+sid;
}
Date.prototype.format = function(format) {
       var date = {
              "M+": this.getMonth() + 1,
              "d+": this.getDate(),
              "h+": this.getHours(),
              "m+": this.getMinutes(),
              "s+": this.getSeconds(),
              "q+": Math.floor((this.getMonth() + 3) / 3),
              "S+": this.getMilliseconds()
       };
       if (/(y+)/i.test(format)) {
              format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));
       }
       for (var k in date) {
              if (new RegExp("(" + k + ")").test(format)) {
                     format = format.replace(RegExp.$1, RegExp.$1.length == 1
                            ? date[k] : ("00" + date[k]).substr(("" + date[k]).length));
              }
       }
       return format;
}
window.cache = {};
$(document).on('tap','.refer-page',function(){
	if(window.proxy){
		window.proxy.backButtonPressed();
	}else{
		var url = window.location = 'wallspace://pageGoBack';
		location.href = url;
	}
	
});
function callSDK(funcName,param){
	if(window.proxy){
		
		var callStr = (param==undefined)?'window.proxy.'+funcName+'()':'window.proxy.'+funcName+'(\''+JSON.stringify(param)+'\')';
		eval(callStr);
		return true;
	}else{
		str = (param==undefined)?'wallspace://' +funcName:'wallspace://' +funcName+'?'+JSON.stringify(param);
		console.log(str);
		window.location = (param==undefined)?'wallspace://' +funcName:'wallspace://' +funcName+'?'+JSON.stringify(param);
	}
}
function genParaObj (Str){
	var temArr = Str.split('&');
	var obj = {};
	for(var i in temArr){
		temArr1 = temArr[i].split('=')
		var todo = 'obj.'+temArr1[0]+'=\''+temArr1[1]+'\'';
		eval(todo)
	}
	return obj;
}
